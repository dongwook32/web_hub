<section class="max-w-6xl mx-auto px-4 pt-8 pb-6 relative" style="margin-top: 80px;">
    <div class="floaters">
        <div class="floater" style="left:10%; bottom:0; animation-duration:8s;">💬</div>
        <div class="floater" style="left:22%; bottom:10px; animation-duration:9s; animation-delay:.5s;">🌟</div>
        <div class="floater" style="left:78%; bottom:0; animation-duration:10s; animation-delay:1s;">🤝</div>
        <div class="floater" style="left:60%; bottom:6px; animation-duration:8.6s; animation-delay:1.2s;">💡</div>
        <div class="floater" style="left:35%; bottom:-6px; animation-duration:9.4s; animation-delay:.8s;">🎈</div>
    </div>
    <p class="text-center text-cocoa">같은 수업, 취미, 관심사를 가진 친구와 자연스럽게 연결될 수 있어요.</p>
    <div class="rounded-xl2 md:rounded-3xl border border-peach/60 bg-white/70 p-8 md:p-12 shadow-card text-center mt-5 reveal relative overflow-hidden">
        <div class="absolute -left-10 -top-10 w-40 h-40 rounded-full bg-lemon/60 blur-3xl"></div>
        <div class="absolute -right-8 -bottom-10 w-40 h-40 rounded-full bg-mint/60 blur-3xl"></div>
        <div class="text-5xl mb-3">🤝</div>
        <h1 class="text-2xl md:text-4xl font-extrabold">세대를 잇는 소통의 장</h1>
        <p class="mt-3 text-cocoa">선배의 경험과 후배의 열정을 이어주며<br class="hidden md:block">따뜻한 연결을 만드는 학과 게시판입니다.</p>
        <div class="mt-6 flex flex-wrap justify-center gap-3">
            <a href="/boards" onclick="event.preventDefault(); window.spaRouter.navigateTo('/boards')" class="px-5 py-3 rounded-bubble bg-peachDeep text-white font-extrabold glow">선후배와 수다 떨기 📌</a>
            <button id="diceBtn" class="dice" type="button"><span class="die" id="die">1</span><span>오늘의 인연 만나기</span></button>
        </div>
        <div class="text-xs text-cocoa mt-2">클릭할 때마다 🎲가 굴러가요!</div>
    </div>
</section>

<section class="max-w-6xl mx-auto px-4 py-6">
    <div class="grid md:grid-cols-3 gap-5">
        <div class="reveal rounded-xl2 border border-peach/50 bg-white hover:shadow-soft p-6 tilt">
            <div class="text-2xl">📌</div>
            <div class="mt-2 font-bold text-lg">게시판</div>
            <p class="text-cocoa text-sm mt-1">카테고리/태그 정리, 검색·정렬, 북마크/신고.</p>
            <a class="inline-block mt-3 text-peachDeep font-semibold" href="/boards" onclick="event.preventDefault(); window.spaRouter.navigateTo('/boards')">바로가기 →</a>
        </div>
        <div class="reveal rounded-xl2 border border-peach/50 bg-white hover:shadow-soft p-6 tilt">
            <div class="text-2xl">🎲</div>
            <div class="mt-2 font-bold text-lg">랜덤 매칭</div>
            <p class="text-cocoa text-sm mt-1">같은 관심사 친구와 가벼운 대화부터.</p>
            <a class="inline-block mt-3 text-peachDeep font-semibold" href="/chat#random" onclick="event.preventDefault(); window.spaRouter.navigateTo('/chat#random')">바로가기 →</a>
        </div>
        <div class="reveal rounded-xl2 border border-peach/50 bg-white hover:shadow-soft p-6 tilt">
            <div class="text-2xl">💬</div>
            <div class="mt-2 font-bold text-lg">실시간 채팅</div>
            <p class="text-cocoa text-sm mt-1">읽음표시, 알림제어, 링크/이미지 미리보기.</p>
            <a class="inline-block mt-3 text-peachDeep font-semibold" href="/chat" onclick="event.preventDefault(); window.spaRouter.navigateTo('/chat')">바로가기 →</a>
        </div>
    </div>
</section>

<script>
    // SPA 환경에 맞게 즉시 실행 함수로 감싸줍니다.
    (function() {
        try {
            // 스크롤 애니메이션 초기화
            const io = new IntersectionObserver((ents) => ents.forEach(e => {
                if (e.isIntersecting) {
                    e.target.classList.add('reveal-on');
                }
            }), { threshold: .15 });
            document.querySelectorAll('.reveal').forEach(el => io.observe(el));

            // 주사위 기능 초기화
            const die = document.getElementById('die');
            const diceBtn = document.getElementById('diceBtn');
            if (die && diceBtn) {
                function roll() {
                    console.log('🎲 주사위 굴리기 시작');
                    diceBtn.classList.add('shake');
                    let n = 1;
                    const timer = setInterval(() => {
                        n = 1 + Math.floor(Math.random() * 6);
                        die.textContent = n;
                    }, 60);
                    setTimeout(() => {
                        clearInterval(timer);
                        diceBtn.classList.remove('shake');
                        if (window.spaRouter) {
                            window.spaRouter.navigateTo('/chat');
                        }
                    }, 700);
                }
                diceBtn.addEventListener('click', roll);
            }
        } catch (error) {
            console.error("index.html 스크립트 오류:", error);
        }
    })();
</script>