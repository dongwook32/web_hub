<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KBU hub | 게시판</title>
  <link rel="icon" href="logo.png">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="boards.css">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: { peach: '#FFC8B2', peachDeep: '#FF9F80', cream: '#FFF7F2', cocoa:'#6B7280', ink:'#1F2937', mint:'#B7F4E6', lemon:'#FFF3A3' },
          boxShadow: { soft:'0 10px 30px rgba(255,159,128,.18)', glow:'0 0 0 0 rgba(255,159,128,.0)', card:'0 10px 24px rgba(17,24,39,.08)' },
          borderRadius: { bubble:'999px', xl2:'1.25rem' }
        }
      }
    }
  </script>
  <style>
    html, body { 
      font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif; 
      font-feature-settings: "liga" 1, "kern" 1;
      text-rendering: optimizeLegibility;
    }
    .top-grad{ background: radial-gradient(60% 60% at 0% 0%, #FFF0E7 0%, rgba(255,240,231,0) 60%), radial-gradient(60% 60% at 100% 0%, #FFE7DB 0%, rgba(255,231,219,0) 60%); }
    .glass{ background: rgba(255,255,255,.7); backdrop-filter: blur(10px); }
    /* 네비게이션 스타일은 nav.css (CSS Cascade Layers)에서 관리 */
    
    /* 헤더 스타일은 navigation.css에서 관리 */
    
    /* 이모티콘 지원을 위한 폰트 설정 */
    .department-icon {
      font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols", sans-serif;
      font-variant-emoji: emoji;
    }
    
    /* 통일된 Footer 스타일 */
    footer {
        border-top: 1px solid rgba(255, 200, 178, 0.5);
        margin-top: 0;
        padding: 0;
    }
    
    footer > div {
        max-width: 72rem;
        margin: 0 auto;
        padding: 1.5rem 1rem;
        font-size: 0.875rem;
        line-height: 1.25rem;
        color: #6B7280;
        text-align: center;
    }
  </style>
</head>
<body class="bg-cream">
  <div class="top-grad h-[160px] w-full absolute inset-0 -z-10 pointer-events-none"></div>
  <header class="fixed top-0 left-0 right-0 z-50 glass border-b border-peach/40">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">
      <a href="index.html" class="flex items-center gap-2 font-extrabold text-lg">
        <img src="logo.png" alt="KBU hub" class="w-9 h-9 rounded-full shadow-[0_8px_18px_rgba(255,159,128,.25)]">
        <span>hub</span>
      </a>
      <nav class="ml-auto hidden md:flex">
        <div id="navPill" class="nav-pill">
          <!-- 네비게이션 아이템은 navigation.js에서 동적으로 생성됩니다 -->
        </div>
      </nav>
      <button id="menuBtn" class="md:hidden ml-auto p-2 rounded-full border border-peach/60">☰</button>
    </div>
    <div id="mobileNav" class="hidden md:hidden px-4 pb-3 border-t border-peach/40 bg-white/70">
      <div class="flex flex-col gap-1 py-2 text-sm">
        <!-- 모바일 네비게이션 아이템은 navigation.js에서 동적으로 생성됩니다 -->
      </div>
    </div>
  </header>

  <main class="boards-container" style="margin-top: 80px;">
        <div class="boards-layout">
      <!-- 좌측 사이드바 -->
      <aside class="sidebar">
        <!-- 학과별 게시판 트리 -->
        <div class="sidebar-section">
          <div class="department-tree" id="departmentTree">
            <!-- 동적으로 생성됩니다 -->
          </div>
                </div>
            </aside>

      <!-- 메인 컨텐츠 -->
      <div class="main-content">
        <!-- 상단 툴바 -->
        <div class="toolbar">
          <div class="toolbar-top">
            <div class="search-section">
              <div class="search-input">
                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input type="text" id="searchInput" placeholder="제목/태그 검색" />
              </div>
              <select class="sort-select" id="sortSelect">
                <option value="latest">최신순</option>
                <option value="popular">추천순</option>
                <option value="views">조회순</option>
              </select>
                    </div>
            <button class="write-btn" onclick="showWriteModal()">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
              </svg>
              글쓰기
            </button>
                        </div>
                    </div>

        <!-- 게시글 목록 -->
        <div class="posts-list" id="postsList">
          <!-- 게시글 카드들이 여기에 동적으로 생성됩니다 -->
        </div>

        <!-- 게시글 상세 화면 -->
        <div class="post-detail-view" id="postDetailView" style="display: none;">
          <!-- 상세 화면 내용이 여기에 동적으로 생성됩니다 -->
        </div>

        <!-- 로딩 상태 -->
        <div class="loading" id="loadingState" style="display: none;">
          <div class="spinner"></div>
        </div>

        <!-- 빈 상태 -->
        <div class="empty-state" id="emptyState" style="display: none;">
          <div class="empty-state-icon">📝</div>
          <h3>게시글이 없습니다</h3>
          <p>첫 번째 게시글을 작성해보세요!</p>
                        </div>
                    </div>
                </div>
  </main>

  <!-- 글쓰기 모달 -->
  <div id="writeModal" class="modal" style="display: none;">
    <div class="modal-content write-modal">
      <div class="modal-header">
        <h2>글쓰기</h2>
        <button class="modal-close" onclick="hideWriteModal()">&times;</button>
      </div>
      
      <form id="writeForm" onsubmit="submitPost(event)">
        <div class="form-group">
          <input type="text" id="postTitle" name="title" placeholder="제목" required />
        </div>
        
        <div class="form-row">
          <select id="postType" name="type">
            <option value="question">질문</option>
            <option value="share">정보</option>
            <option value="discussion">토론</option>
          </select>
          
          <label class="anonymous-toggle">
            <input type="checkbox" id="postAnonymous" name="anonymous" />
            <span class="toggle-switch"></span>
            익명
          </label>
        </div>
        
        <div class="form-group">
          <textarea id="postContent" name="content" placeholder="@선배A 처럼 멘션하고, #취업 처럼 태그를 남겨보세요." rows="12" required></textarea>
        </div>
        
        <div class="form-group">
          <input type="text" id="tagInput" placeholder="#태그 입력 후 Enter" />
          <div class="tags-container" id="tagsContainer"></div>
        </div>
        
        <div class="form-actions">
          <button type="button" class="btn-secondary">임시저장</button>
          <button type="submit" class="btn-primary">등록</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 댓글 모달 -->
  <div id="commentModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>댓글</h2>
        <button class="modal-close" onclick="hideCommentModal()">&times;</button>
      </div>
      <div class="comment-section">
        <div class="comments-list" id="commentsList"></div>
        <form id="commentForm" class="comment-form">
          <input type="text" id="commentInput" placeholder="@멘션, #태그와 함께 댓글을 입력하세요" />
          <label class="anonymous-toggle">
            <input type="checkbox" id="commentAnonymous" />
            <span class="toggle-switch"></span>
            익명
          </label>
          <button type="submit" class="reply-btn">
            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
            </svg>
            전송
          </button>
        </form>
      </div>
    </div>
  </div>

  <footer>
    <div>
      © <span id="year"></span> KBU hub · All rights reserved.
    </div>
  </footer>

  <script src="boards.js"></script>
  <script src="navigation.js"></script>
</body>
</html>