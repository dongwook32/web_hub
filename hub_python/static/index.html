<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KBU hub | 홈</title>
  <link rel="icon" href="logo.png">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: { peach: '#FFC8B2', peachDeep: '#FF9F80', cream: '#FFF7F2', cocoa:'#6B7280', ink:'#1F2937', mint:'#B7F4E6', lemon:'#FFF3A3' },
          boxShadow: { soft:'0 10px 30px rgba(255,159,128,.18)', glow:'0 0 0 0 rgba(255,159,128,.0)', card:'0 10px 24px rgba(17,24,39,.08)' },
          borderRadius: { bubble:'999px', xl2:'1.25rem' }
        }
      }
    }
  </script>
<link rel="stylesheet" href="css/nav.css">
  <style>
    html, body { font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif; }
    .top-grad{ background: radial-gradient(60% 60% at 0% 0%, #FFF0E7 0%, rgba(255,240,231,0) 60%), radial-gradient(60% 60% at 100% 0%, #FFE7DB 0%, rgba(255,231,219,0) 60%); }
    .glass{ background: rgba(255,255,255,.7); backdrop-filter: blur(10px); }
    /* 네비게이션 스타일은 nav.css (CSS Cascade Layers)에서 관리 */
    .nav-bubble{ position:absolute; top:4px; left:4px; height:calc(100% - 8px); width:120px; border-radius:999px; background:linear-gradient(180deg, rgba(255,200,178,.9), rgba(255,159,128,.9)); box-shadow: 0 8px 22px rgba(255,159,128,.35); transition: transform .35s cubic-bezier(.2,.8,.25,1), width .25s; }
    .tilt{ transition: transform .2s ease, box-shadow .2s ease; }
    .tilt:hover{ transform: translateY(-2px) rotate(.2deg); box-shadow: 0 18px 40px rgba(255,159,128,.25); }
    .reveal{ opacity:0; transform: translateY(8px); transition: all .6s ease; }
    .reveal.reveal-on{ opacity:1; transform: translateY(0); }
    .floaters{ position:absolute; inset:0; pointer-events:none; overflow:hidden; }
    .floater{ position:absolute; font-size:22px; opacity:.75; animation: drift linear infinite; }
    @keyframes drift { 0%{ transform: translateY(0) translateX(0) rotate(0deg); opacity:.0 } 10%{opacity:.75} 100%{ transform: translateY(-120px) translateX(20px) rotate(15deg); opacity:0 } }
    .dice{ position:relative; display:inline-flex; align-items:center; gap:8px; padding:12px 18px; border-radius:999px; color:white; background:#FF9F80; font-weight:800; box-shadow: 0 12px 30px rgba(255,159,128,.3); transition: transform .15s ease, box-shadow .2s ease; }
    .dice:hover{ transform: translateY(-1px); box-shadow: 0 16px 36px rgba(255,159,128,.36); }
    .die{ width:22px; height:22px; border-radius:6px; background:white; display:grid; place-items:center; color:#FF9F80; font-weight:900; box-shadow: inset 0 0 0 2px rgba(255,159,128,.7); }
    .shake{ animation: shake .6s cubic-bezier(.36,.07,.19,.97) both; }
    @keyframes shake {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(2px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
      40%, 60% { transform: translate3d(4px, 0, 0); }
    }
    .glow{ box-shadow: 0 0 0 0 rgba(255,159,128,.6); animation: pulse 2.2s ease-in-out infinite; }
    @keyframes pulse { 0%{box-shadow:0 0 0 0 rgba(255,159,128,.55)} 70%{box-shadow:0 0 0 16px rgba(255,159,128,0)} 100%{box-shadow:0 0 0 0 rgba(255,159,128,0)} }
    
    /* 헤더 스타일은 navigation.css에서 관리 */
    
    /* 통일된 Footer 스타일 */
    footer {
        border-top: 1px solid rgba(255, 200, 178, 0.5);
        margin-top: 0;
        padding: 0;
    }
    
    footer > div {
        max-width: 72rem;
        margin: 0 auto;
        padding: 1.5rem 1rem;
        font-size: 0.875rem;
        line-height: 1.25rem;
        color: #6B7280;
        text-align: center;
    }
  </style>
</head>
<body class="bg-cream text-ink">
  <div class="top-grad h-[160px] w-full absolute inset-0 -z-10 pointer-events-none"></div>

  <header class="fixed top-0 left-0 right-0 z-50 border-b border-peach/40 glass">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">
      <a href="index.html" class="flex items-center gap-2 font-extrabold text-lg">
        <img src="logo.png" alt="KBU hub" class="w-9 h-9 rounded-full shadow-[0_8px_18px_rgba(255,159,128,.25)]">
        <span>hub</span>
      </a>
      <nav class="ml-auto hidden md:flex">
        <div id="navPill" class="nav-pill">
          <!-- 네비게이션 아이템은 navigation.js에서 동적으로 생성됩니다 -->
        </div>
      </nav>
      <button id="menuBtn" class="md:hidden ml-auto p-2 rounded-full border border-peach/60">☰</button>
    </div>
    <div id="mobileNav" class="hidden md:hidden px-4 pb-3 border-t border-peach/40 bg-white/70">
      <div class="flex flex-col gap-1 py-2 text-sm">
        <!-- 모바일 네비게이션 아이템은 navigation.js에서 동적으로 생성됩니다 -->
      </div>
    </div>
  </header>

  <section class="max-w-6xl mx-auto px-4 pt-8 pb-6 relative" style="margin-top: 80px;">
    <div class="floaters">
      <div class="floater" style="left:10%; bottom:0; animation-duration:8s;">💬</div>
      <div class="floater" style="left:22%; bottom:10px; animation-duration:9s; animation-delay:.5s;">🌟</div>
      <div class="floater" style="left:78%; bottom:0; animation-duration:10s; animation-delay:1s;">🤝</div>
      <div class="floater" style="left:60%; bottom:6px; animation-duration:8.6s; animation-delay:1.2s;">💡</div>
      <div class="floater" style="left:35%; bottom:-6px; animation-duration:9.4s; animation-delay:.8s;">🎈</div>
    </div>
    <p class="text-center text-cocoa">같은 수업, 취미, 관심사를 가진 친구와 자연스럽게 연결될 수 있어요.</p>
    <div class="rounded-xl2 md:rounded-3xl border border-peach/60 bg-white/70 p-8 md:p-12 shadow-card text-center mt-5 reveal relative overflow-hidden">
      <div class="absolute -left-10 -top-10 w-40 h-40 rounded-full bg-lemon/60 blur-3xl"></div>
      <div class="absolute -right-8 -bottom-10 w-40 h-40 rounded-full bg-mint/60 blur-3xl"></div>
      <div class="text-5xl mb-3">🤝</div>
      <h1 class="text-2xl md:text-4xl font-extrabold">세대를 잇는 소통의 장</h1>
      <p class="mt-3 text-cocoa">선배의 경험과 후배의 열정을 이어주며<br class="hidden md:block">따뜻한 연결을 만드는 학과 게시판입니다.</p>
      <div class="mt-6 flex flex-wrap justify-center gap-3">
        <a href="boards.html" class="px-5 py-3 rounded-bubble bg-peachDeep text-white font-extrabold glow">선후배와 수다 떨기 📌</a>
        <button id="diceBtn" class="dice" type="button"><span class="die" id="die">1</span><span>오늘의 인연 만나기</span></button>
      </div>
      <div class="text-xs text-cocoa mt-2">클릭할 때마다 🎲가 굴러가요!</div>
    </div>
  </section>

  <section class="max-w-6xl mx-auto px-4 py-6">
    <div class="grid md:grid-cols-3 gap-5">
      <div class="reveal rounded-xl2 border border-peach/50 bg-white hover:shadow-soft p-6 tilt">
        <div class="text-2xl">📌</div>
        <div class="mt-2 font-bold text-lg">게시판</div>
        <p class="text-cocoa text-sm mt-1">카테고리/태그 정리, 검색·정렬, 북마크/신고.</p>
        <a class="inline-block mt-3 text-peachDeep font-semibold" href="boards.html">바로가기 →</a>
      </div>
      <div class="reveal rounded-xl2 border border-peach/50 bg-white hover:shadow-soft p-6 tilt">
        <div class="text-2xl">🎲</div>
        <div class="mt-2 font-bold text-lg">랜덤 매칭</div>
        <p class="text-cocoa text-sm mt-1">같은 관심사 친구와 가벼운 대화부터.</p>
        <a class="inline-block mt-3 text-peachDeep font-semibold" href="chat.html#random">바로가기 →</a>
      </div>
      <div class="reveal rounded-xl2 border border-peach/50 bg-white hover:shadow-soft p-6 tilt">
        <div class="text-2xl">💬</div>
        <div class="mt-2 font-bold text-lg">실시간 채팅</div>
        <p class="text-cocoa text-sm mt-1">읽음표시, 알림제어, 링크/이미지 미리보기.</p>
        <a class="inline-block mt-3 text-peachDeep font-semibold" href="chat.html">바로가기 →</a>
      </div>
    </div>
  </section>

  <section class="max-w-6xl mx-auto px-4 py-6">
    <div class="reveal rounded-xl2 border border-peach/50 bg-white p-6 md:p-8 shadow-card" style="background-color: white; border-radius: 20px;">
      <div class="md:flex gap-8 items-center">
        <!-- 왼쪽 텍스트 영역 -->
        <div class="md:w-1/2">
          <h2 class="text-2xl md:text-3xl font-extrabold mb-4 text-center" style="color: #1f2937; font-weight: 800; line-height: 1.2;">안전하고 따뜻한 커뮤니티</h2>
          <p class="text-base mb-2 text-center" style="color: #6b7280; font-weight: 400; line-height: 1.5;">모두가 안심하고 소통할 수 있도록</p>
          <p class="text-sm text-center" style="color: #6b7280; font-weight: 400; line-height: 1.5;">KBU Hub는 세 가지 원칙을 지킵니다.</p>
        </div>
        
        <!-- 오른쪽 카드 영역 -->
        <div class="md:w-1/2 mt-6 md:mt-0">
          <div class="space-y-4">
            <!-- 신고/차단 기능 카드 -->
            <div class="flex items-start gap-4 p-5 rounded-xl2" style="background-color: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
              <div class="text-3xl" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));">🛡️</div>
              <div>
                <h3 class="font-extrabold text-lg mb-1" style="color: #1f2937; font-weight: 800;">신고/차단 기능</h3>
                <p class="text-sm" style="color: #6b7280; font-weight: 400; line-height: 1.4;">악성 이용자에 대한 빠른 대응</p>
              </div>
            </div>
            
            <!-- 익명 옵션 카드 -->
            <div class="flex items-start gap-4 p-5 rounded-xl2" style="background-color: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
              <div class="text-3xl" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));">👻</div>
              <div>
                <h3 class="font-extrabold text-lg mb-1" style="color: #1f2937; font-weight: 800;">익명 옵션 제공</h3>
                <p class="text-sm" style="color: #6b7280; font-weight: 400; line-height: 1.4;">글과 댓글 단위로 선택 가능</p>
              </div>
            </div>
            
            <!-- 투명한 정책 공지 카드 -->
            <div class="flex items-start gap-4 p-5 rounded-xl2" style="background-color: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
              <div class="text-3xl" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));">📢</div>
              <div>
                <h3 class="font-extrabold text-lg mb-1" style="color: #1f2937; font-weight: 800;">투명한 정책 공지</h3>
                <p class="text-sm" style="color: #6b7280; font-weight: 400; line-height: 1.4;">가이드라인 및 운영 정책 공개</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="max-w-6xl mx-auto px-4 py-6" style="background-color: #fdf7f5;">
    <div class="reveal rounded-xl2 border border-peach/60 bg-white p-6 md:p-8 text-center" style="border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.08);">
      <!-- 로켓 아이콘 -->
      <div class="text-5xl mb-4">🚀</div>
      
      <!-- 메인 제목 -->
      <h3 class="text-2xl md:text-3xl font-extrabold mb-3" style="color: #2c3e50; font-weight: 800;">KBU Hub, 지금 시작해보세요</h3>
      
      <!-- 설명 텍스트 -->
      <div class="text-cocoa mb-6" style="color: #7f8c8d; line-height: 1.6;">
        <p class="text-sm mb-1">선배, 동기, 후배와 교류하며 새로운 기회를 발견하고,</p>
        <p class="text-sm">따뜻한 커뮤니티의 일원이 되어보세요.</p>
      </div>
      
      <!-- 버튼 영역 -->
      <div class="flex flex-col sm:flex-row justify-center gap-3">
        <a href="login.html#signup" class="px-6 py-3 rounded-bubble bg-peachDeep text-white font-extrabold glow">시작하기 ⭐</a>
        <a href="index.html" class="px-6 py-3 rounded-bubble border border-peach/70 hover:shadow-soft transition">서비스 둘러보기</a>
      </div>
    </div>
  </section>

  <footer>
    <div>
      © <span id="year"></span> KBU hub · All rights reserved.
    </div>
  </footer>

  <script>
    // 디버깅용 로그
    console.log('🚀 페이지 로딩 시작');
    
    // DOM 로딩 확인
    document.addEventListener('DOMContentLoaded', function() {
      console.log('✅ DOM 로딩 완료');
      
      // 요소들이 존재하는지 확인
      const menuBtn = document.getElementById('menuBtn');
      const year = document.getElementById('year');
      const navPill = document.getElementById('navPill');
      const die = document.getElementById('die');
      const diceBtn = document.getElementById('diceBtn');
      
      console.log('🔍 요소 확인:', {
        menuBtn: !!menuBtn,
        year: !!year,
        navPill: !!navPill,
        die: !!die,
        diceBtn: !!diceBtn
      });
      
      // 각 기능 초기화
      try {
        // 모바일 메뉴
        if (menuBtn) {
          menuBtn.addEventListener('click', ()=>{
            document.getElementById('mobileNav').classList.toggle('hidden');
            console.log('📱 모바일 메뉴 토글');
          });
        }
        
        // 년도 설정
        if (year) {
          year.textContent = new Date().getFullYear();
          console.log('📅 년도 설정 완료');
        }
        
        // 스크롤 애니메이션
        const io = new IntersectionObserver((ents)=>ents.forEach(e=>{ 
          if(e.isIntersecting) {
            e.target.classList.add('reveal-on');
            console.log('✨ 요소 애니메이션 시작:', e.target);
          }
        }), {threshold:.15});
        document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
        console.log('🎭 스크롤 애니메이션 초기화 완료');
        
        // 네비게이션 버블 제거됨
        
        // 익명 프로필 체크 함수
        function checkAnonProfile() {
          try {
            const profile = JSON.parse(localStorage.getItem('anonProfile') || 'null');
            
            // 프로필이 없거나 필수 정보가 누락된 경우
            if (!profile || !profile.year || !profile.gender || !profile.interests || profile.interests.length === 0) {
              // 프로필 설정 페이지로 리다이렉트
              alert('랜덤 매칭을 이용하려면 먼저 익명 프로필을 설정해주세요!');
              window.spaRouter.navigateTo('/profile-setup');
              return false;
            }
            return true;
          } catch (e) {
            console.error('프로필 체크 실패:', e);
            alert('랜덤 매칭을 이용하려면 먼저 익명 프로필을 설정해주세요!');
            window.spaRouter.navigateTo('/profile-setup');
            return false;
          }
        }

        // 주사위 기능
        if (die && diceBtn) {
          function roll(){ 
            // 프로필 체크
            if (!checkAnonProfile()) {
              return;
            }
            
            console.log('🎲 주사위 굴리기 시작');
            diceBtn.classList.add('shake'); 
            let n=1; 
            const timer=setInterval(()=>{ 
              n = 1 + Math.floor(Math.random()*6); 
              die.textContent=n; 
            }, 60); 
            setTimeout(()=>{ 
              clearInterval(timer); 
              diceBtn.classList.remove('shake'); 
              console.log('🎲 주사위 굴리기 완료, 채팅 페이지로 이동');
              window.spaRouter.navigateTo('/chat'); 
            }, 700); 
          }
          diceBtn.addEventListener('click', roll);
          console.log('🎲 주사위 기능 초기화 완료');
        }
        
        console.log('🎉 모든 기능 초기화 완료!');
        
      } catch (error) {
        console.error('❌ 초기화 중 오류 발생:', error);
      }
    });
    
    // 페이지 로딩 완료 로그
    window.addEventListener('load', function() {
      console.log('🎊 페이지 완전 로딩 완료');
    });
  </script>
  <script src="js/navigation.js"></script>
</body>
</html>