<!DOCTYPE html>
<html lang="ko" class="font-loading">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KBU hub | ëŒ€í•™ìƒ ìµëª… ì»¤ë®¤ë‹ˆí‹°</title>
  <link rel="icon" href="logo.png">
  
  <!-- í°íŠ¸ ë¡œë”© ìµœì í™” (FOUT ë°©ì§€) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- ì‹œìŠ¤í…œ í°íŠ¸ fallback ìš°ì„  ì ìš© (ì¦‰ì‹œ ë¡œë“œ) -->
  <style>
    /* ì´ˆê¸° í°íŠ¸ ì„¤ì • - ì‹œìŠ¤í…œ í°íŠ¸ ìš°ì„  (FOUT ë°©ì§€) */
    html, body {
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      font-display: swap;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }
    
    /* í•œêµ­ì–´ í°íŠ¸ fallback */
    .korean-text {
      font-family: "Apple SD Gothic Neo", "Malgun Gothic", "ë§‘ì€ ê³ ë”•", ui-sans-serif, system-ui, -apple-system, sans-serif;
      font-display: swap;
    }
    
    /* í°íŠ¸ ë¡œë”© ìƒíƒœ ê´€ë¦¬ */
    .font-loading { 
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif; 
    }
    .font-loaded { 
      font-family: "Pretendard", ui-sans-serif, system-ui, -apple-system, sans-serif; 
    }
  </style>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // ì „ì—­ Tailwind ì„¤ì • - ëª¨ë“  í˜ì´ì§€ì—ì„œ ì‚¬ìš©
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'peach': '#FF9F7C',
            'peachDeep': '#FF7B54',
            'peachLight': '#FFC8B2',
            'cream': '#FFF8F5',
            'cocoa': '#8B4513',
            'ink': '#2D3748',
            'mint': '#B7F4E6',
            'lemon': '#FFF3A3'
          },
          fontFamily: {
            'sans': ['Pretendard', 'ui-sans-serif', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'Noto Sans KR', 'sans-serif']
          },
          boxShadow: {
            'soft': '0 10px 30px rgba(255,159,128,.18)',
            'glow': '0 0 0 0 rgba(255,159,128,.0)',
            'card': '0 10px 24px rgba(17,24,39,.08)'
          },
          borderRadius: {
            'bubble': '999px',
            'xl2': '1.25rem'
          }
        }
      }
    }
  </script>
  
  <!-- ì „ì—­ ìŠ¤íƒ€ì¼ (ë¡œë”© ìˆœì„œ ì¤‘ìš”) -->
  <link rel="stylesheet" href="layout.css">
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="style.css">
  
  <!-- Pretendard í°íŠ¸ ë¹„ë™ê¸° ë¡œë”© (FOUT ë°©ì§€) -->
  <link rel="preload" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet"></noscript>
  
  <!-- í°íŠ¸ ë¡œë”© ì™„ë£Œ í›„ í´ë˜ìŠ¤ ì¶”ê°€ -->
  <script>
    // í°íŠ¸ ë¡œë”© ìƒíƒœ ê´€ë¦¬ (FOUT ë°©ì§€)
    document.documentElement.classList.add('font-loading');
    
    if ('fonts' in document) {
      // Pretendard í°íŠ¸ ë¡œë”© ì‹œë„
      document.fonts.load('400 16px Pretendard').then(() => {
        document.documentElement.classList.remove('font-loading');
        document.documentElement.classList.add('font-loaded');
        console.log('âœ… Pretendard í°íŠ¸ ë¡œë”© ì™„ë£Œ');
      }).catch(() => {
        // í°íŠ¸ ë¡œë”© ì‹¤íŒ¨ ì‹œ ì‹œìŠ¤í…œ í°íŠ¸ ìœ ì§€
        document.documentElement.classList.remove('font-loading');
        console.log('âš ï¸ Pretendard í°íŠ¸ ë¡œë”© ì‹¤íŒ¨, ì‹œìŠ¤í…œ í°íŠ¸ ì‚¬ìš©');
      });
      
      // ëª¨ë“  í°íŠ¸ ë¡œë”© ì™„ë£Œ ëŒ€ê¸°
      document.fonts.ready.then(() => { 
        console.log('âœ… ëª¨ë“  í°íŠ¸ ë¡œë”© ì™„ë£Œ'); 
      });
    } else {
      // í°íŠ¸ API ë¯¸ì§€ì› ì‹œ ì‹œìŠ¤í…œ í°íŠ¸ ì‚¬ìš©
      setTimeout(() => {
        document.documentElement.classList.remove('font-loading');
        console.log('âš ï¸ í°íŠ¸ API ë¯¸ì§€ì›, ì‹œìŠ¤í…œ í°íŠ¸ ì‚¬ìš©');
      }, 100);
    }
  </script>
  
  <!-- ì´ˆê¸° ìŠ¤íƒ€ì¼ (FOUC ë°©ì§€) - ê°€ì¥ ë¨¼ì € ë¡œë“œ -->
  <style>
    /* ì´ˆê¸° ë¡œë”© ìƒíƒœ ìŠ¤íƒ€ì¼ */
    .font-loading {
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
    }
    
    /* === FOUC ë°©ì§€: ì´ˆê¸° ìŠ¤íƒ€ì¼ ì¦‰ì‹œ ì ìš© === */
    
    /* ê¸°ë³¸ ë ˆì´ì•„ì›ƒ */
    html { 
      font-size: 16px; 
      line-height: 1.6; 
      -webkit-text-size-adjust: 100%; 
      -webkit-font-smoothing: antialiased; 
      -moz-osx-font-smoothing: grayscale; 
      text-rendering: optimizeLegibility; 
    }
    
    body {
      margin: 0;
      padding: 0;
      background: #FFF8F5;
      color: #2D3748;
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
      overflow-x: hidden;
      min-height: 100vh;
    }
    
    /* í—¤ë” ê³ ì • (CLS ë°©ì§€) */
    .app-header {
      height: 80px;
      min-height: 80px;
      max-height: 80px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 9999;
      background: linear-gradient(180deg, rgba(255,255,255,.8), rgba(255,255,255,.6));
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 200, 178, 0.4);
      transform: translateZ(0);
      backface-visibility: hidden;
      will-change: auto;
    }
    
    /* ë„¤ë¹„ê²Œì´ì…˜ í¬ê¸° ê³ ì • - ì¦‰ì‹œ ì ìš© */
    .nav-item {
      min-height: 38px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      font-weight: 600;
      padding: 10px 16px;
      border-radius: 9999px;
      color: #1F2937;
      text-decoration: none;
      transition: opacity 0.15s ease;
    }
    
    .nav-item:hover {
      opacity: 0.92;
    }
    
    .nav-item.is-active {
      background: #FF9F7C;
      color: #FFFFFF;
    }
    
    /* ë¡œê³  í¬ê¸° ê³ ì • - ì¦‰ì‹œ ì ìš© */
    .logo-img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 8px 18px rgba(255,159,128,.25);
    }
    
    /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ (CLS ë°©ì§€) */
    .app-content {
      margin-top: 80px;
      min-height: calc(100vh - 80px);
      position: relative;
      z-index: 1;
      transform: translateZ(0);
      backface-visibility: hidden;
      will-change: auto;
    }
    
    /* í˜ì´ì§€ ì»¨í…Œì´ë„ˆ (CLS ë°©ì§€) */
    .page-container {
      min-height: calc(100vh - 80px);
      padding: 20px 0;
    }
    
    /* ë°°ê²½ ê³ ì • - ì¦‰ì‹œ ì ìš© */
    .app-background {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: -10;
      pointer-events: none;
      background: radial-gradient(60% 60% at 0% 0%, #FFF0E7 0%, rgba(255,240,231,0) 60%), 
                  radial-gradient(60% 60% at 100% 0%, #FFE7DB 0%, rgba(255,231,219,0) 60%);
    }
    
    /* í‘¸í„° ê³ ì • */
    footer {
      border-top: 1px solid rgba(255, 200, 178, 0.5);
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(10px);
      min-height: 60px;
    }
    
    /* ì½˜í…ì¸  ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
    .content-transition {
      transition: opacity 0.15s ease, transform 0.15s ease;
      will-change: opacity, transform;
    }
    .content-enter { 
      opacity: 0; 
      transform: translateY(10px); 
    }
    .content-enter-active { 
      opacity: 1; 
      transform: translateY(0); 
    }
    .content-exit { 
      opacity: 1; 
      transform: translateY(0); 
    }
    .content-exit-active { 
      opacity: 0; 
      transform: translateY(-10px); 
    }
    
    /* í˜ì´ì§€ ì „í™˜ ìƒíƒœ */
    .page-transitioning .app-header { 
      position: fixed; 
      top: 0; 
      left: 0; 
      right: 0; 
      z-index: 9999; 
      transform: translateZ(0); 
      backface-visibility: hidden; 
    }
    .page-transitioning { 
      overflow: hidden; 
      height: 100vh; 
    }
    
    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• - ì¦‰ì‹œ ì ìš© */
    @media (max-width: 768px) {
      .app-header {
        height: 70px;
        min-height: 70px;
        max-height: 70px;
      }
      
      .app-content {
        margin-top: 70px;
        min-height: calc(100vh - 70px);
      }
      
      .nav-item {
        font-size: 14px;
        padding: 8px 12px;
      }
    }
    
    /* ë¡œë”© ìŠ¤í”¼ë„ˆ - ì¦‰ì‹œ ì ìš© */
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 159, 124, 0.3);
      border-top: 3px solid #FF9F7C;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* ì´ë¯¸ì§€ CLS ë°©ì§€ */
    img { 
      aspect-ratio: attr(width) / attr(height); 
      max-width: 100%; 
      height: auto; 
    }
    
    /* ë²„íŠ¼ CLS ë°©ì§€ */
    .btn { 
      min-height: 44px; 
      display: inline-flex; 
      align-items: center; 
      justify-content: center; 
    }
    
    /* ì…ë ¥ í•„ë“œ CLS ë°©ì§€ */
    .input { 
      min-height: 44px; 
      box-sizing: border-box; 
    }
  </style>
</head>
<body class="bg-cream text-ink">
  <!-- ê³ ì • ë°°ê²½ (ì–¸ë§ˆìš´íŠ¸ ë°©ì§€) -->
  <div class="app-background"></div>
  
  <!-- ê³ ì • í—¤ë” (ì–¸ë§ˆìš´íŠ¸ ë°©ì§€) -->
  <header class="app-header" data-component="header">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4 h-full">
      <!-- ë¡œê³  (SPA ë¼ìš°í„° ì‚¬ìš©) -->
      <a href="/" class="flex items-center gap-2 font-extrabold text-lg spa-link" data-route="/">
        <img src="logo.png" alt="KBU hub" class="logo-img" width="36" height="36">
        <span>hub</span>
      </a>
      
      <!-- ë°ìŠ¤í¬í†± ë„¤ë¹„ê²Œì´ì…˜ (ê³ ì •) -->
      <nav class="ml-auto hidden md:flex" data-component="desktop-nav">
        <div id="navPill" class="nav-pill">
          <!-- ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œì€ navigation.jsì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
      </nav>
      
      <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ (ê³ ì •) -->
      <button id="menuBtn" class="md:hidden ml-auto p-2 rounded-full border border-peach/60 hover:bg-peach/10 transition-colors">
        <span class="sr-only">ë©”ë‰´ ì—´ê¸°</span>
        â˜°
      </button>
    </div>
    
    <!-- ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ (ê³ ì •) -->
    <div id="mobileNav" class="hidden md:hidden px-4 pb-3 border-t border-peach/40 bg-white/70" data-component="mobile-nav">
      <div class="flex flex-col gap-1 py-2 text-sm">
        <!-- ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œì€ navigation.jsì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
      </div>
    </div>
  </header>
  
  <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ (í˜ì´ë“œ ì „í™˜) -->
  <main id="main-content" class="app-content content-transition">
    <!-- í˜ì´ì§€ë³„ ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
    <div class="page-container">
      <div class="loading-spinner-container flex justify-center items-center min-h-[calc(100vh-80px)]">
        <div class="loading-spinner"></div>
      </div>
    </div>
  </main>
  
  <!-- ê³ ì • í‘¸í„° -->
  <footer class="border-t border-peach/50 bg-white/50 backdrop-blur-sm">
    <div class="max-w-6xl mx-auto px-4 py-6">
      <div class="text-center text-sm text-cocoa">
        Â© <span id="year"></span> KBU hub Â· All rights reserved.
      </div>
    </div>
  </footer>
  
  <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-spinner"></div>
  </div>
  
  <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© (ë¡œë”© ìˆœì„œ ì¤‘ìš”) -->
  <script src="preload.js"></script>
  <script src="navigation.js"></script>
  <script src="router.js"></script>
  
  <!-- ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ë…„ë„ ì„¤ì •
      document.getElementById('year').textContent = new Date().getFullYear();
      
      // ë„¤ë¹„ê²Œì´ì…˜ ì´ˆê¸°í™”
      if (window.NavigationManager) {
        window.navigationManager = new NavigationManager();
      }
      
      // SPA ë¼ìš°í„° ì´ˆê¸°í™”
      if (window.spaRouter) {
        console.log('ğŸš€ SPA ë¼ìš°í„° ì´ˆê¸°í™” ì™„ë£Œ');
      }
      
      // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
      const menuBtn = document.getElementById('menuBtn');
      const mobileNav = document.getElementById('mobileNav');
      
      if (menuBtn && mobileNav) {
        menuBtn.addEventListener('click', () => {
          mobileNav.classList.toggle('hidden');
          console.log('ğŸ“± ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€');
        });
      }
      
      // í˜ì´ì§€ ë¡œë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      window.addEventListener('pageLoaded', (e) => {
        console.log('ğŸ“„ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ:', e.detail);
        
        // ë¡œë”© ì˜¤ë²„ë ˆì´ ìˆ¨ê¸°ê¸°
        const loadingOverlay = document.getElementById('loadingOverlay');
        if (loadingOverlay) {
          loadingOverlay.classList.remove('active');
        }
      });
      
      console.log('ğŸ‰ ì•± ì´ˆê¸°í™” ì™„ë£Œ');
    });
    
    // ì—ëŸ¬ í•¸ë“¤ë§
    window.addEventListener('error', (e) => {
      console.error('âŒ ì „ì—­ ì—ëŸ¬:', e.error);
    });
    
    window.addEventListener('unhandledrejection', (e) => {
      console.error('âŒ ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€:', e.reason);
    });
  </script>
</body>
</html>
